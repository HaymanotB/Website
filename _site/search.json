[
  {
    "objectID": "posts/rp_bundesliga-table/index.html",
    "href": "posts/rp_bundesliga-table/index.html",
    "title": "Excess attraction in the Bundesliga",
    "section": "",
    "text": "Footnotes\n\nTechnically, I calculate excess attraction as the difference between the actual number of members a club has and the number of members that we would expect if the total number of all club members are redistributed according to the share of population which live closest to each club.↩︎\nThe value calculated by Ansgar Wolsing.↩︎"
  },
  {
    "objectID": "posts/tt2022-08-09_ferriswheels/index.html",
    "href": "posts/tt2022-08-09_ferriswheels/index.html",
    "title": "How far does that ferris wheel roll?",
    "section": "",
    "text": "What I love about data visualization is how it combines creative thinking (what do I want to show?) with technical programming skills (how do I show this?). Nowhere do you combine these two things as elegantly as in the weekly tidy tuesday challenges. Here, data wizards around the word play and practice with fascinating datasets from chocolate bar ratings to the mobility of ERASMUS students to – this week – data on ferris wheels around the world.1 As someone who goes pale in any kind of rollercoaster, ferris wheels feel just about advantageous enough to start my own tidy tuesday journey.\n\n\n\nBefore opening R, I think about what I find fascinating about the topic and what I want to convey with my visualization. Here I am sticking to some descriptive analysis and won’t overthink it, so let’s just go with one of the first thing that came to my mind… ferris wheels are really big!\n\nIf a ferris wheel would be an actual wheel, how far would it travel during one rotation?2\n\nThe message gives me part of the structure for the visualization. Here, I want to select a few examples from different countries and show the diameter on the x-axis. I’ve created a lot of horizontal bar charts for a consultancy this summer, so naturally this is my starting point.\nA great thing about these just-for-fun challenges is that you can use them to add 1-2 new skills to your visualization toolbox. For this challenge I want to learn two things:\n\nHow do I add icons (ferris wheels 🎡, obviously) instead of dots in the chart?\nHow do I add country flags on the y-axis.\n\nI don’t want to spend the entire evening on this, so I think it is important to limit myself to only these two new features. I will also concentrate on them and not care too much (yet) about other things, like titles, background, themes, etc…\n\n\n\n\n\n\nImportant\n\n\n\nBecause this isn’t a mystery novel, I am giving away how the visualization will look like in the end. Don’t click if you want to keep the suspense…\n\n\n\n\n\nWith these initial thoughts out of the way, I can roughly sketch the visualization process and outline of this post.\n\nA first look at the data. Choose which points to show.\nCreate the simplest graph that shows the intended message.\nAdd the ferris wheel icons.\nAdd the country flags.\nClean up the graph.\n\n\n\n\n\n\n\n\n\nLet’s first install the necessary packages and load and save the data.\n#install.packages(c(\"tidytuesdayR\", \"tidyverse\", \"here\", \"ggimage\", \"countrycode\", \"ggtext\"))\nlibrary(tidyverse)\nlibrary(here)\n#data &lt;- tidytuesdayR::tt_load(\"2022-08-09\")$wheels\n#write_rds(data, here(\"posts\", \"tt2022-08-09_ferriswheels\", \"data\", \"wheels\"))\ndata &lt;- read_rds(here(\"posts\", \"tt2022-08-09_ferriswheels\", \"data\", \"wheels\"))\n\n\n\nThe entire dataset collects 22 variables on 73 ferris wheels in 26 different countries. This is way to much information to display, so let’s keep only a handful of ferris wheels and only information on their name, country, height and diameter.\n\ndata &lt;- data |&gt; \n  select(country, name, height, diameter) |&gt; \n  group_by(country) |&gt; \n  filter(height == max(height, na.rm = T),\n         country %in% c(\"Austria\", \"Canada\", \"China\", \"Mexico\", \"UK\", \"USA\")) |&gt;\n  ungroup() |&gt; \n  mutate(across(c(height, diameter), round, 0),\n         country = factor(country))\n\nThis is the data that we will use. As a comparison, I will add data from a more typical wheel: my dutch bicycle wheel.\n\ndata &lt;- bind_rows(data, tibble(country = \"Netherlands\", name = \"Philipp's bike wheel\", height = 0.67, diameter = 0.67))\nknitr::kable(data)\n\n\n\n\ncountry\nname\nheight\ndiameter\n\n\n\n\nChina\nBeijing Great Wheel\n693.00\n643.00\n\n\nUSA\nGolden Gate Flyer\n728.00\n700.00\n\n\nUK\nLondon Eye\n443.00\n394.00\n\n\nCanada\nNiagara SkyWheel\n175.00\n167.00\n\n\nMexico\nStar of Puebla\n262.00\n229.00\n\n\nAustria\nWiener Riesenrad\n212.00\n200.00\n\n\nNetherlands\nPhilipp’s bike wheel\n0.67\n0.67\n\n\n\n\n\n\n\n\n\np &lt;- ggplot(data, aes(y = fct_rev(country), x = diameter)) + \n  labs(x = \"\", y = \"\",\n       # x = \"Diameter of the highest ferris wheel in the country (in meter)\"\n       title = \"How far do you travel during one rotation in the largest ferris wheels?\",\n       caption = \"Data from ferriswheel package by Emil Hvitfeldt, #tidytuesday August 2022\") +\n  scale_x_continuous(limits = c(0, 800)) +\n  theme_minimal() +\n  theme(panel.grid = element_blank())\np +\n  geom_point() +\n  geom_segment(aes(y = country, yend = country, x = 0, xend = diameter), linetype = \"dashed\")\n\n\n\n\n\n\n\n\n\n\n\n\n\nThis isn’t pretty, but that’s not the point. Having a bare-minimum working example helps to think about whether the graph type fits and what can be done to emphasise the key message. It also helps to create a to-do list of things to improve: like a different order of ferris wheels, maybe adding an empty row to separate the bike data from the ferris wheel data, a label or subtitle that puts the ferris wheel in relation to the bike wheel, another background color, adding ‘meter’ to the x-axis and more). But let us first tackle the two big learnings that I wanted to get out of the challenge: replacing the dots with icons (now I also need a bike, 🚲) and adding the country flags.\n\n\n\nAs always, there are many ways to Rome. Here I am going with the ggimage package maintained by Guangchuang YU. I have not used this before, but a look at the online vignette makes me hopeful that I can use this for the ferris wheel icons and the country flags 😃\nThere are two ways we can go. The first is to use the ggimage::geom_emoji and to insert the ferris wheel and bicycle emojis that I have used throughout the post. That seems simple, we just need the unicode to pass it to the function. That’s easy to look up at, e.g. https://unicode.org/emoji/charts/full-emoji-list.html.\n\ndata$size = if_else(data$name == \"Philipp's bike wheel\", 0.075, data$diameter / max(data$diameter) * 0.25)\np +\n  geom_segment(aes(y = fct_rev(country), yend = fct_rev(country), x = 0, xend = diameter), linetype = \"dashed\", color = \"gray\", position = position_nudge(y = - 0.25)) +\n  ggimage::geom_emoji(aes(image = if_else(name == \"Philipp's bike wheel\", \"1f6b2\", \"1f3a1\")), position = position_nudge(y = (data$size / 0.3) - 0.25), size = data$size)\n\n\n\n\n\n\n\n\nThis looks OK. The most complicated part was actually that I wanted to scale the size of the image by the size of the ferris wheel, which required making an extra size column and experimenting a lot with position_nudge to let the dashed line go to the bottom of the icon, not to the middle. But I am not super happy with the emoji’s, so let’s try to download some images of ferris wheels and use those with ggimage::geom_image() instead.\nI’ll first download a simple transparent ferris wheel png file (from here) and use a bike icon (from here).\n\nferris_path &lt;- here(\"posts\", \"tt2022-08-09_ferriswheels\", \"images\", \"ferriswheel.png\")\nbike_path &lt;- here(\"posts\", \"tt2022-08-09_ferriswheels\", \"images\", \"bike.png\")\n\np1 &lt;- p +\n  geom_segment(aes(y = fct_rev(country), yend = fct_rev(country), x = 0, xend = diameter),\n               linetype = \"dashed\", color = \"gray\", \n               position = position_nudge(y = - 0.25)) +\n  ggimage::geom_image(\n    aes(image = if_else(data$name == \"Philipp's bike wheel\", bike_path, ferris_path)), \n    position = position_nudge(y = (data$size / 0.27) - 0.25, \n                              x = if_else(data$name == \"Philipp's bike wheel\", 15, 0)), \n    size = data$size * 1.5)\np1\n\n\n\n\n\n\n\n\nI’m happy with this. Onwards to do the country flags!\n\n\n\nIn the plots so far, I kept the country names on the y-axis. However, I would prefer to use the actual names of the ferris wheel and replace the country names with flags. We’ll continue with the ggimage package, which contains a geom_flag() function. The package expects country codes (e.g. NL, US), so we need to transform the names by hand using the countrycodes package.\n\n# Create the country labels from the country names\ndata$code &lt;- countrycode::countrycode(data$country, origin = \"country.name\", destination = \"iso2c\") \n\n# Sort the factor levels of the 'name' variable alphabetically *by country* (the combination of arrange and fct_inorder does that, there are surely smarter ways)\ndata &lt;- data |&gt; arrange(country)\ndata$name &lt;- fct_inorder(factor(data$name))\n\n# Create the graph again from scratch because instead of mapping the country to the y axis, I now\n# map the name to the y axis. Again, surely there are smarter ways to do that...\n# I also move the flags a bit to the left of the x axis and expand the limits of the plot accordingly.\np2 &lt;- \n  ggplot(data, aes(y = fct_rev(name), x = diameter)) + \n  geom_segment(aes(y = fct_rev(name), yend = fct_rev(name), x = 0, xend = diameter),\n               linetype = \"dashed\", color = \"gray\", \n               position = position_nudge(y = - 0.25)) +\n  ggimage::geom_image(aes(image = if_else(name == \"Philipp's bike wheel\", bike_path, ferris_path)),\n                      position = position_nudge(y = (data$size / 0.27) - 0.25,\n                                                x = if_else(data$name == \"Philipp's bike wheel\", 15, 0)),\n                      size = data$size * 1.5) +\n  ggimage::geom_flag(x = -70, aes(image = code)) +\n  labs(x = \"\", y = \"\",\n       title = \"How far do you travel during one rotation in the largest ferris wheels?\",\n       caption = \"Data from ferriswheel package by Emil Hvitfeldt, #tidytuesday August 2022\") +\n  scale_x_continuous(limits = c(-50, 800)) +\n  theme_minimal() +\n  theme(panel.grid = element_blank())\np2\n\n\n\n\n\n\n\n\nThis looks fine. The main headache in the code chunk above was replacing the mapping of the y axis to show the name (and not the country) and correcting the ordering of the observations.\n\n\n\nI am happy with how the flags and ferris wheels turned out and am now ready to go back to the to-do list from the beginning with some minor things to clean up the graph. This is a playful challenge and ferris wheels are fun, so let’s go for a very light pinkish background colour. I am also adding a text box (using the ggtext package) to use my bicycle wheel as an example to show just how big these ferris wheels are.\n\n\nCode\nturns &lt;- pull(round(data[which(data$diameter == max(data$diameter)), \"diameter\"] / data[data$name == \"Philipp's bike wheel\", \"diameter\"]))\ndata$name &lt;- fct_relevel(data$name, \"Philipp's bike wheel\")\n\np3 &lt;- \n  ggplot(data, aes(y = fct_rev(name), x = diameter)) + \n  geom_segment(aes(y = fct_rev(name), yend = fct_rev(name), x = 0, xend = diameter),\n               linetype = \"dashed\", color = \"gray\", alpha = 0.5,\n               position = position_nudge(y = -0.25)) +\n  ggimage::geom_image(aes(image = if_else(name == \"Philipp's bike wheel\", bike_path, ferris_path)),\n                      position = position_nudge(y = (data$size / 0.27) - 0.25,\n                                                x = if_else(data$name == \"Philipp's bike wheel\", 15, 0)),\n                      size = data$size * 1.5) +\n  ggimage::geom_flag(x = -70, aes(image = code)) +\n  labs(x = \"\", y = \"\",\n       title = \"How far do you travel with one rotation of the largest wheels in the world?\",\n       caption = \"Visualization by Philipp Kollenda / @pkollenda . Accompanying blog post on my website. \\n Data from ferriswheel package by Emil Hvitfeldt, #tidytuesday August 2022\") +\n  ggtext::geom_textbox(aes(x = 300, y = 6.75, hjust = 0,\n                           label = glue::glue(\"My bike wheel has to &lt;span style='color: red;'&gt;turn {turns} times&lt;/span&gt; to travel the same distance as one rotation with the largest ferris wheel.\")),\n                       fill = \"papayawhip\", width = unit(6, \"cm\"), size = 3) +\n  scale_x_continuous(limits = c(-50, 800), labels = scales::label_number(suffix = \" meter\")) +\n  theme_minimal() +\n  theme(panel.grid = element_blank(), legend.position = \"none\",\n        plot.title.position = \"plot\", plot.title = ggtext::element_textbox_simple(size = 20, padding = margin(c(10, 10, 20, 10))),\n        axis.text.y = element_text(size = 12)) +\n  theme(plot.background = element_rect(fill = \"#FFFAFA\"))\np3\n\n\n\n\n\n\n\n\n\n\n\n\nI am happy with how this visualization turned out and glad I learned something about how to insert flags, icons and other images with the ggimage package. I will now hop on my bicycle and think of the Golden Gate Flyer… approximately every 1045 (bike) wheel turn."
  },
  {
    "objectID": "posts/qp2022-08-05_my-first-website/index.html",
    "href": "posts/qp2022-08-05_my-first-website/index.html",
    "title": "Build a simple website with R and Quarto in under 30 10 minutes.",
    "section": "",
    "text": "I am especially excited about the possibility to quickly build websites (for blogs, teaching, sharing notes, publishing research etc.) with Quarto, without having to leave my R environment where I do all my coding anyways. Let’s get started!\n\nLet’s start by building a very simple website. I have three things on my wishlist:\n\nthe website should have multiple pages,\nan intuitive way to navigate between them and\nshow some images, code and output.\n\nWe won’t worry about hosting yet (that’s for another post) and simply use quarto.pub (more on that below).\n\n\n\n\n\n\ntl;dr: Here is how to get a website up and running in three steps\n\n\n\n\nIn RStudio, start a new project and choose Quarto website.\nChange content in the .qmd files and configuration in the .yml file.\nPublish to quarto pub via the terminal.\n\n\n\nHere is the final website https://philipp.quarto.pub/my-first-website But, let’s look at each of the steps in more detail.\n\nStep 1: Create the Quarto website project\nIn RStudio, we create a new project and choose Quarto website from the list of available templates. If that does not show up for you, chances are that you need to update RStudio to the latest version (i.e. RStudio 2022.07.1+554 “Spotted Wakerobin” works).\nA click on create project will create the scaffolding for our new website:\n\nTwo .qmd files that will become pages on our website.\nA .yml file that we use to keep track of the options.\nA styles.css file that we use to customize the appearance of the website1.\n\nIf we click on “Render” (or use Shift + Cmd + K) the document will (hopefully) render and show up in the Viewer pane of RStudio. That’s all and we could already publish this as a functioning website (🥳), but let’s add at least a minimal amount of our own content.\n\n\nStep 2: Changing the content (.qmd) and the structure (.yml) of our website.\nWhen we initialized the project, Quarto graciously already created two .qmd files which will be two pages on our website and a .yml file which records settings about the structure, general options, appearance and so on.\nWe are going to change the default content of the index.qmd file and the name and content of the about.qmd file. To do that, simply open the respective .qmd file and edit what you want to change. We won’t focus here on how to author Quarto documents, but the documentation on https://quarto.org/docs/authoring is amazing. For completeness, I put the code that I used in our website at the bottom of this post.\nNow, ideally we want to see the effects of our changes immediately. There are two options. We can switch on “Render on Save” and see the updated page in RStudios Viewer pane whenever we save. Or – way cooler IMHO – we can preview the entire website by typing quarto preview in the terminal field of RStudio (next to the console, where???).\n\n\n\n\n\n\nPreview a website without publishing it by typing quarto preview in the terminal.\n\n\n\nWhere the .qmd files tell the browser what the website should display, the .yml file tells the browser how to structure the website. This is where you change the design, add pages, choose a logo and so much more. We’ll not go into detail on the site configuration yaml here and just focus on getting a simple website up-and-running, but luckily the Quarto team has you covered.\n\n\nStep 3: Publish your website.\nThis is it! It is time to let our creation leave the confines of the local computer and roam the world wide web. But we need a home address for our website and for the sake of using the simplest possible solution we will publish the website using quarto pub.\nIf you are already signed up and authenticated for Quarto Pub, great! Keep reading below.\n\n\nOtherwise click here to show the details.\n\nIf you still need to make an account, go to the quarto pub website (https://quartopub.com/), click Sign up, confirm your email and choose a username. The username will be in the URL of every website you create, so best to choose something highly professional 🤓.\n\nOnce you created your account (or if you already had one), open https://quartopub.com (this should show an empty profile page if you have not previously created a website) and just keep it open.\nNow comes the magic. Head back to RStudio and type quarto publish quarto-pub in the terminal (termi-WHAT?). If you are logged in to quarto pub in a browser, the terminal will show ? Publish with account:, your email address on the next line and in gray the words Use another account…. Don’t be fooled (like I was). This is not an error message and the console is not trying to tell you to use another account, it’s merely asking… So, confidently press Enter and it will ask about the site name. Press enter again and voilà, Quarto will upload your .qmd and .yml files to quarto pub and publish your website.\nYou (and everyone else!) can now see your website at YOUR-USERNAME.quarto.pub/YOUR-WEBSITE-NAME/. Here is the site that I just created in during this post https://philipp.quarto.pub/my-first-website/.\n\n\n\n\nAppendix\n\nStupid mistakes that tripped me up and that you don’t need to repeat.\n\nWhere is the terminal in RStudio?\nIf you do not use the terminal often it is easy to overlook it even though it is hidden in plain sight.  ##### Why does quarto pub ask me a different name / email address… When I first published this site, I diligently typed quarto publish quarto-pub in the terminal and was greeted by the message: “Use a different name…”.\n\n\nI fixed a typo but already published the site, what now?\nDon’t despair, unlike certain social media sites, quarto.pub does come with an edit button. Simply change what you want to change in the .qmd or .yml files and don’t forget to publish again via the termina. The console will ask you if you want to update the already published site… yes, please! That last step is easy to miss though, because RStudio’s Render on Save and Preview make it so easy to expect that everything just updates automatically.\n\n\n\n\nThe content of the index.qmd file.\nNote that I am not actually including the first line, only the part beginning with the yaml dashes (---).\n```{r}\n---\ntitle: \"Welcome to my first website\"\n---\n\nThis is a Quarto website that I created in just a few minutes. Read about it here and find amazing resources on <https://quarto.org/docs/websites>.\n\n![](images/screenshot.png)\n```\n\n\nThe content of the about.qmd file.\n---\ntitle: \"Ferries Wheels\"\n---\n\n## Some fun with ferries wheels\n\n```{r}\n#| label: ferries-plot\n#| code-line-numbers: true\n#| code-fold: true\n#| message: false\n# install.packages(\"tidytuesdayR\") install.packages(\"tidyverse\")\nlibrary(tidyverse)\nlibrary(ggplot2)\n#data <- tidytuesdayR::tt_load(\"2022-08-09\")$wheels\ndata <- read_rds(\"data/wheels\")\nhighest <- data |> \n  group_by(country) |> \n  filter(height == max(height, na.rm = T),\n         country %in% c(\"Canada\", \"China\", \"Mexico\", \"Taiwan\", \"Japan\", \"Philippines\", \"UK\", \"USA\")) |> \n  select(country, height, diameter)\nggplot(highest, aes(y = fct_rev(factor(country)), x = diameter)) + \n  geom_point() +\n  geom_segment(aes(y = country, yend = country, x = 0, xend = diameter), linetype = \"dashed\") +\n  labs(x = \"\", y = \"\",\n       # x = \"Diameter of the highest ferries wheel in the country (in meter)\"\n       title = \"How far do you travel during one rotation in the highest ferries wheels?\",\n       caption = \"Data from ferriewheel package by Emil Hvitfeldt, #tidytuesday August 2022\") +\n  scale_x_continuous(limits = c(0, 800)) +\n  theme_minimal()\n```\n\n\n\n\n\n\nFootnotes\n\n\nWe won’t worry about customizing anything yet and the file is empty anyways.↩︎"
  },
  {
    "objectID": "posts/tt2022-08-16_psychometric/index.html",
    "href": "posts/tt2022-08-16_psychometric/index.html",
    "title": "A fancy title",
    "section": "",
    "text": "# datalist &lt;- tidytuesdayR::tt_load(\"2022-08-16\")\n# write_rds(datalist, here(\"posts\", \"tt2022-08-16_psychometric\", \"data\", \"psychometric\"))\ndatalist &lt;- read_rds(here(\"posts\", \"tt2022-08-16_psychometric\", \"data\", \"psychometric\"))\ncharacters &lt;- datalist$characters\nstats &lt;- datalist$psych_stats\n\n\n\n\ndata &lt;- characters |&gt; filter()"
  },
  {
    "objectID": "posts/nt_alphabetic-sorting/index.html",
    "href": "posts/nt_alphabetic-sorting/index.html",
    "title": "Alphabetically sorting your source code character vectors",
    "section": "",
    "text": "For week 33 of #TidyTuesday 2022 I had to manually select names from a dataset. So, I typed something like\n\nfilter(df, name %in% c(\"The Witcher\", \"Hamilton\", \"Westworld\", \"Sense8\"))\n\nDo you see what’s wrong with this? No? Congratulations 🎉, you have a much healthier, more pragmatic approach to coding than I do.\nI, on the other hand, was bothered by the fact that the series names were not in alphabetical order. But, “hey”, I thought, R is a “well-developed, simple and effective programming language”, so why not use it to bring my source code into alphabetical order.\n\n\n\n\n\n\n\n\n\n\n\nThe context is not really important, so I won’t go into detail on what this dataset was about. The trick is super generally and applies to many situations anyways. But you can see my final plot on Twitter and the accompanying blog post on my website.\n\n\n\n\nMy goal is to get alphabetically sorted output that I can simply copy + paste into my source file (or write to the file with write_lines()).\n\nx <- c(\"The Witcher\", \"Hamilton\", \"Westworld\", \"Sense8\")\nprint(x)\n\n[1] \"The Witcher\" \"Hamilton\"    \"Westworld\"   \"Sense8\"     \n\ndput(sort(x))\n\nc(\"Hamilton\", \"Sense8\", \"The Witcher\", \"Westworld\")\n\n\nSuccess! That last line is something I can copy. 😃 And…it only took approximately 1000 hours of googling to find dput() 🙈 Eventually the Similar questions that pop-up just before you create a stackoverflow question came to the rescue.\nIt would be really cool to immediately copy the output of the dput() statement to the clipboard. There is the clipr package which looks promising, but that is something for another evening."
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Haymanot Berelie Berehan",
    "section": "",
    "text": "Welcome to my website.\nI am a Biostatistician"
  },
  {
    "objectID": "pages/teaching.html",
    "href": "pages/teaching.html",
    "title": "Teaching",
    "section": "",
    "text": "PhD Level Courses (Tinbergen Institute)\n2015: Macroeconomics 1 (TA Professor Bruegemann)\n\n\nMaster Level Courses (Vrije Universiteit Amsterdam)\n2020: Introduction to Econometrics (TA for Professor Dobbelaere), Evaluation 4.3/5\n2020: Applied Econometrics (TA for Professor Dobbelaere), Evaluation 4.1/5\n\n\nBachelor Level Courses (Vrije Universiteit Amsterdam)\n2022: Macroeconomics I (TA for Professor Bruegemann), Evaluation 4.9/5\n2018-2020: Macroeconomics I (TA for Professor Bartelsman), Evaluation 3.5/5\n2018-2020: Foundations of Macroeconomics (TA for Professor Zant), Evaluation 4.1/5\n2018-2020: Inclusive Growth and Sustainability (TA for Professor Hoefkes and Professor Lanjouw), Evaluation 4.25/5\n\n\nThesis Supervision\n2020: Economics Bachelor Thesis: “Does Foreign Direct Investment Promote Growth in Sub-Saharan Africa? Insights from Sectoral Decomposition”\n2020: Economics Master Thesis: “Impact of Chinese FDI on Debt and Imports from China” and “The Effect of Educational Inequality on Income Inequality”\n2020: Economics Bachelor Thesis: “The Relationship between Charity Advertisements and Misconceptions about Low-Income Countries”\n2019: Economics Master Thesis: “Reassessing the Impact of Inequality on Economic Growth”"
  },
  {
    "objectID": "pages/research.html",
    "href": "pages/research.html",
    "title": "Research",
    "section": "",
    "text": "I focus on innovative forms of financing sustainable economic development, from impact investing to agricultural finance. I also study agricultural markets, with a focus on smallholder farmer value chains in East Africa."
  },
  {
    "objectID": "pages/research.html#peer-reviewed-publications",
    "href": "pages/research.html#peer-reviewed-publications",
    "title": "Research",
    "section": "Peer-reviewed Publications",
    "text": "Peer-reviewed Publications\n\nFinancial Returns or Social Impact? What Motivates Impact Investors’ Lending to Firms in Low-Income Countries (Journal of Banking & Finance, 2022 | open-access link)\n\nI analyze 70,000 transactions by retail impact investors on a peer-to-peer lending platform that intermediates loans to firms in low-income countries. Loans pay interest to investors and publicize indicators of expected social impact. Financial returns significantly influence investors’ decisions: a one percentage point increase in the interest rate increases funding speed seven-fold, investment probability two-fold and transaction size by 122 Euro. Expected social impact influences investors’ perception but has no influence (for female empowerment, employees and beneficiaries) or limited influence (for turnover) on investors’ funding decisions. When all available loans pay the same interest rates, female borrowers - but not firms with many employees or beneficiaries - are more likely to be chosen, suggesting that variation in financial returns can crowd out salient dimensions of social impact. The study implies that peer-to-peer lending platforms should function as gatekeepers of social impact and cannot outsource the evaluation of social impact to retail impact investors.\n\n\nI’m excited to share my first-ever publication 🥳At times doing a PhD feels like filling a pool with water one cup at a time and it's difficult to see progress. I'm glad that my first publishing experience was smooth with great comments from editor & referee.A thread: [1/11] pic.twitter.com/72doP4ziiJ— Philipp Kollenda (@philippkollenda) July 23, 2021"
  },
  {
    "objectID": "pages/research.html#working-papers",
    "href": "pages/research.html#working-papers",
    "title": "Research",
    "section": "Working Papers",
    "text": "Working Papers\n\nBad News Travel Fast … and Decrease Credit Supply in Peer-to-Peer Lending\n\nUsing a new dataset of transactions on a Dutch peer-to-peer lending platform, I investigate the stability of credit supply when investors experience repayment delays. I exploiting a natural experiment, where some investors experience repayment delays in impact investment loans and show that the delays cause aﬀected investors to decrease their credit supply by 206€ on average, resulting in a shortage of credit of almost 400,000€ to borrowers unconnected to the delays. Repayment delays thus have substantial negative externalities on the ability of ﬁrms to raise capital through the peer-to-peer lending platform.\n\n\n\nRipe for Contract? Avocado contract farming in Kenya improves agricultural investments, knowledge and prices. Link to working paper and to presentation\n\nWe evaluate the impact of a multi-layered contract farming intervention that connected smallholder farmers in central Kenya to avocado exporting companies, provided training in good agricultural practices and certified farmer organizations according to the global good agricultural practices (GAP) production standard. Using panel data from 2015 and 2017 we show that the intervention was successful at delivering its immediate goals. It increased the share of farmers that sold to companies, were recently trained and received the GAP certification. Contract farming significantly improved the sales prices of farmers, and knowledge of avocado-farming practices and led to increased investments into the Hass avocado variety which is in higher demand in export markets. We find suggestive, albeit not statistically significant, evidence that contract farming improved farmer income and shifted labour from family to hired labour. At the same time, contract farmers produced less of the local avocado variety, leading to a significant decrease in total quantity sold during the transition to the export-oriented Hass avocado variety. We contribute to the literature by quantifying the impact of a multi-layered contract farming intervention. Panel data allows us to estimate a doubly-robust difference-in-differences design, giving us more confidence to interpret our estimates as causal evidence of contract farming than traditional cross-sectional studies allow for."
  },
  {
    "objectID": "pages/motivation.html",
    "href": "pages/motivation.html",
    "title": "Motivation",
    "section": "",
    "text": "I get energy from working together with others to build a better world, where prosperity is created sustainably, redistributed globally and shared by all.\nMy professional ambition is to help people and organizations combine data with rigorous methodologies to generate evidence that allows us to improve people’s livelihoods through sustainable economic development.\n\n\n\nTweets by philippkollenda"
  },
  {
    "objectID": "pages/about.html",
    "href": "pages/about.html",
    "title": "About",
    "section": "",
    "text": "I have dual master’s degrees in Biostatistics from Stellenbosch University and Statistics from Addis Ababa University, coupled with 11+ years of experience in project leading, data management, analysis, and teaching. These experiences equipped me with a deep understanding of complex data, its management, analysis and use with application of different statistical methods. I have interest in causal inference, longitudinal data analysis and survival data analysis. I have a piece of statistical software training experiences (R, SAS, SPSS)."
  },
  {
    "objectID": "pages/presentations.html",
    "href": "pages/presentations.html",
    "title": "Presentations",
    "section": "",
    "text": "I enjoy presenting my work and strive to communicate my research effectively, engagingly and targeted to the audience. In the past I have experimented with web-based presentations build with R Markdown and deployed with Netifly. You can find some examples below.\nPresentation on “Ripe for Contracts” working paper.\nPresentation of Poverty Targeting Replication for a workshop."
  },
  {
    "objectID": "blog.html",
    "href": "blog.html",
    "title": "Blog",
    "section": "",
    "text": "Excess attraction in the Bundesliga\n\n\nWhich teams would have the most members if location was the only thing that mattered?\n\n\n\ninteractive\n\n\nfootball\n\n\n\n\n\n\n\n\n\nAug 18, 2022\n\n\nYebelay\n\n\n\n\n\n\n\n\n\n\n\n\nAlphabetically sorting your source code character vectors\n\n\nNeat little tricks, Episode 1\n\n\n\nneat-tricks\n\n\n\n\n\n\n\n\n\nAug 17, 2022\n\n\nYebelay\n\n\n\n\n\n\n\n\n\n\n\n\nA fancy title\n\n\n#tidytuesday data visualization with R, ggplot and A COOL PACKAGE\n\n\n\ntidytuesday\n\n\ndataviz\n\n\nhow-to\n\n\n\n\n\n\n\n\n\nAug 16, 2022\n\n\nYebelay\n\n\n\n\n\n\n\n\n\n\n\n\nHow far does that ferris wheel roll?\n\n\n#tidytuesday data visualization with R, ggplot and ggimage\n\n\n\ntidytuesday\n\n\ndataviz\n\n\nhow-to\n\n\n\n\n\n\n\n\n\nAug 9, 2022\n\n\nYebelay\n\n\n\n\n\n\n\n\n\n\n\n\nBuild a simple website with R and Quarto in under 30 10 minutes.\n\n\nAnd then spend hours tweaking it.\n\n\n\nquarto\n\n\nhow-to\n\n\n\n\n\n\n\n\n\nAug 6, 2022\n\n\nPhilipp Kollenda\n\n\n\n\n\n\nNo matching items"
  },
  {
    "objectID": "pages/education.html",
    "href": "pages/education.html",
    "title": "Education",
    "section": "",
    "text": "Stellenbosch University, South Africa| CapeTown\n\nMSc in Biostatistics|January 2020 - April 2022\n\nAddis Ababa University, Ethiopia| Addis Ababa, Ethiopia\n\nMSc in Statistics(Biostatistics)| Sptember 2015 - July 2017\n\nWollo University, Ethiopia| Dessie, Ethiopia\n\nBSc in Statistics | September 2009 - July 2012"
  },
  {
    "objectID": "pages/exprience.html",
    "href": "pages/exprience.html",
    "title": "Expreniece",
    "section": "",
    "text": "Survey Manager at: Center for Evaluation and Development (C4ED) from ‘2023-05-01’ to present\nSenior Research Officer at: Frontieri consulting Plc from ‘2022-07-04’ to ‘2023-04-30’\nBiostatistics Experience and Technical Assistance (BETA) internship/consulting at: CDC Ethiopa from ‘2021-07-01’ to ‘2022-07-12’\nLecturer at: “Debre Markos University” from ‘2013-01-01’ date_end: ’’"
  },
  {
    "objectID": "pages/publication.html",
    "href": "pages/publication.html",
    "title": "Publication",
    "section": "",
    "text": "I focus on innovative forms of financing sustainable economic development, from impact investing to agricultural finance. I also study agricultural markets, with a focus on smallholder farmer value chains in East Africa."
  },
  {
    "objectID": "pages/publication.html#peer-reviewed-publications",
    "href": "pages/publication.html#peer-reviewed-publications",
    "title": "Publication",
    "section": "Peer-reviewed Publications",
    "text": "Peer-reviewed Publications\n\nFinancial Returns or Social Impact? What Motivates Impact Investors’ Lending to Firms in Low-Income Countries (Journal of Banking & Finance, 2022 | open-access link)\n\nI analyze 70,000 transactions by retail impact investors on a peer-to-peer lending platform that intermediates loans to firms in low-income countries. Loans pay interest to investors and publicize indicators of expected social impact. Financial returns significantly influence investors’ decisions: a one percentage point increase in the interest rate increases funding speed seven-fold, investment probability two-fold and transaction size by 122 Euro. Expected social impact influences investors’ perception but has no influence (for female empowerment, employees and beneficiaries) or limited influence (for turnover) on investors’ funding decisions. When all available loans pay the same interest rates, female borrowers - but not firms with many employees or beneficiaries - are more likely to be chosen, suggesting that variation in financial returns can crowd out salient dimensions of social impact. The study implies that peer-to-peer lending platforms should function as gatekeepers of social impact and cannot outsource the evaluation of social impact to retail impact investors.\n\n\nI’m excited to share my first-ever publication 🥳At times doing a PhD feels like filling a pool with water one cup at a time and it's difficult to see progress. I'm glad that my first publishing experience was smooth with great comments from editor & referee.A thread: [1/11] pic.twitter.com/72doP4ziiJ— Philipp Kollenda (@philippkollenda) July 23, 2021"
  },
  {
    "objectID": "pages/publication.html#working-papers",
    "href": "pages/publication.html#working-papers",
    "title": "Publication",
    "section": "Working Papers",
    "text": "Working Papers\n\nBad News Travel Fast … and Decrease Credit Supply in Peer-to-Peer Lending\n\nUsing a new dataset of transactions on a Dutch peer-to-peer lending platform, I investigate the stability of credit supply when investors experience repayment delays. I exploiting a natural experiment, where some investors experience repayment delays in impact investment loans and show that the delays cause aﬀected investors to decrease their credit supply by 206€ on average, resulting in a shortage of credit of almost 400,000€ to borrowers unconnected to the delays. Repayment delays thus have substantial negative externalities on the ability of ﬁrms to raise capital through the peer-to-peer lending platform.\n\n\n\nRipe for Contract? Avocado contract farming in Kenya improves agricultural investments, knowledge and prices. Link to working paper and to presentation\n\nWe evaluate the impact of a multi-layered contract farming intervention that connected smallholder farmers in central Kenya to avocado exporting companies, provided training in good agricultural practices and certified farmer organizations according to the global good agricultural practices (GAP) production standard. Using panel data from 2015 and 2017 we show that the intervention was successful at delivering its immediate goals. It increased the share of farmers that sold to companies, were recently trained and received the GAP certification. Contract farming significantly improved the sales prices of farmers, and knowledge of avocado-farming practices and led to increased investments into the Hass avocado variety which is in higher demand in export markets. We find suggestive, albeit not statistically significant, evidence that contract farming improved farmer income and shifted labour from family to hired labour. At the same time, contract farmers produced less of the local avocado variety, leading to a significant decrease in total quantity sold during the transition to the export-oriented Hass avocado variety. We contribute to the literature by quantifying the impact of a multi-layered contract farming intervention. Panel data allows us to estimate a doubly-robust difference-in-differences design, giving us more confidence to interpret our estimates as causal evidence of contract farming than traditional cross-sectional studies allow for."
  },
  {
    "objectID": "pages/puplications.html",
    "href": "pages/puplications.html",
    "title": "Publications",
    "section": "",
    "text": "I focus on innovative forms of financing sustainable economic development, from impact investing to agricultural finance. I also study agricultural markets, with a focus on smallholder farmer value chains in East Africa."
  },
  {
    "objectID": "pages/puplications.html#peer-reviewed-publications",
    "href": "pages/puplications.html#peer-reviewed-publications",
    "title": "Publications",
    "section": "Peer-reviewed Publications",
    "text": "Peer-reviewed Publications\n\nFinancial Returns or Social Impact? What Motivates Impact Investors’ Lending to Firms in Low-Income Countries (Journal of Banking & Finance, 2022 | open-access link)\n\nI analyze 70,000 transactions by retail impact investors on a peer-to-peer lending platform that intermediates loans to firms in low-income countries. Loans pay interest to investors and publicize indicators of expected social impact. Financial returns significantly influence investors’ decisions: a one percentage point increase in the interest rate increases funding speed seven-fold, investment probability two-fold and transaction size by 122 Euro. Expected social impact influences investors’ perception but has no influence (for female empowerment, employees and beneficiaries) or limited influence (for turnover) on investors’ funding decisions. When all available loans pay the same interest rates, female borrowers - but not firms with many employees or beneficiaries - are more likely to be chosen, suggesting that variation in financial returns can crowd out salient dimensions of social impact. The study implies that peer-to-peer lending platforms should function as gatekeepers of social impact and cannot outsource the evaluation of social impact to retail impact investors.\n\n\nI’m excited to share my first-ever publication 🥳At times doing a PhD feels like filling a pool with water one cup at a time and it's difficult to see progress. I'm glad that my first publishing experience was smooth with great comments from editor & referee.A thread: [1/11] pic.twitter.com/72doP4ziiJ— Philipp Kollenda (@philippkollenda) July 23, 2021"
  },
  {
    "objectID": "pages/puplications.html#working-papers",
    "href": "pages/puplications.html#working-papers",
    "title": "Publications",
    "section": "Working Papers",
    "text": "Working Papers\n\nBad News Travel Fast … and Decrease Credit Supply in Peer-to-Peer Lending\n\nUsing a new dataset of transactions on a Dutch peer-to-peer lending platform, I investigate the stability of credit supply when investors experience repayment delays. I exploiting a natural experiment, where some investors experience repayment delays in impact investment loans and show that the delays cause aﬀected investors to decrease their credit supply by 206€ on average, resulting in a shortage of credit of almost 400,000€ to borrowers unconnected to the delays. Repayment delays thus have substantial negative externalities on the ability of ﬁrms to raise capital through the peer-to-peer lending platform.\n\n\n\nRipe for Contract? Avocado contract farming in Kenya improves agricultural investments, knowledge and prices. Link to working paper and to presentation\n\nWe evaluate the impact of a multi-layered contract farming intervention that connected smallholder farmers in central Kenya to avocado exporting companies, provided training in good agricultural practices and certified farmer organizations according to the global good agricultural practices (GAP) production standard. Using panel data from 2015 and 2017 we show that the intervention was successful at delivering its immediate goals. It increased the share of farmers that sold to companies, were recently trained and received the GAP certification. Contract farming significantly improved the sales prices of farmers, and knowledge of avocado-farming practices and led to increased investments into the Hass avocado variety which is in higher demand in export markets. We find suggestive, albeit not statistically significant, evidence that contract farming improved farmer income and shifted labour from family to hired labour. At the same time, contract farmers produced less of the local avocado variety, leading to a significant decrease in total quantity sold during the transition to the export-oriented Hass avocado variety. We contribute to the literature by quantifying the impact of a multi-layered contract farming intervention. Panel data allows us to estimate a doubly-robust difference-in-differences design, giving us more confidence to interpret our estimates as causal evidence of contract farming than traditional cross-sectional studies allow for."
  },
  {
    "objectID": "pages/about.html#education",
    "href": "pages/about.html#education",
    "title": "About",
    "section": "Education",
    "text": "Education\n\nStellenbosch University, South Africa| CapeTown\n\nMSc in Biostatistics|January 2020 - April 2022\n\nAddis Ababa University, Ethiopia| Addis Ababa, Ethiopia\n\nMSc in Statistics(Biostatistics)| Sptember 2015 - July 2017\n\nWollo University, Ethiopia| Dessie, Ethiopia\n\nBSc in Statistics | September 2009 - July 2012"
  },
  {
    "objectID": "pages/about.html#experience",
    "href": "pages/about.html#experience",
    "title": "About",
    "section": "Experience",
    "text": "Experience\n\nSurvey Manager at: Center for Evaluation and Development (C4ED) from ‘2023-05-01’ to present\nSenior Research Officer at: Frontieri consulting Plc from ‘2022-07-04’ to ‘2023-04-30’\nBiostatistics Experience and Technical Assistance (BETA) internship/consulting at: CDC Ethiopa from ‘2021-07-01’ to ‘2022-07-12’\nLecturer at: “Debre Markos University” from ‘2013-01-01’ date_end: ’’"
  },
  {
    "objectID": "contact.html",
    "href": "contact.html",
    "title": "Contact",
    "section": "",
    "text": "Spatial data analaysis Training\n\n\n\n\n\n\n\n\n\n\n\nYebelay , Yebelay Berehan\n\n\n\n\n\n\n\n\n\n\n\n\nExcess attraction in the Bundesliga\n\n\nWhich teams would have the most members if location was the only thing that mattered?\n\n\n\ninteractive\n\n\nfootball\n\n\n\n\n\n\n\n\n\nAug 18, 2022\n\n\nYebelay\n\n\n\n\n\n\n\n\n\n\n\n\nAlphabetically sorting your source code character vectors\n\n\nNeat little tricks, Episode 1\n\n\n\nneat-tricks\n\n\n\n\n\n\n\n\n\nAug 17, 2022\n\n\nYebelay\n\n\n\n\n\n\n\n\n\n\n\n\nA fancy title\n\n\n#tidytuesday data visualization with R, ggplot and A COOL PACKAGE\n\n\n\ntidytuesday\n\n\ndataviz\n\n\nhow-to\n\n\n\n\n\n\n\n\n\nAug 16, 2022\n\n\nYebelay\n\n\n\n\n\n\n\n\n\n\n\n\nHow far does that ferris wheel roll?\n\n\n#tidytuesday data visualization with R, ggplot and ggimage\n\n\n\ntidytuesday\n\n\ndataviz\n\n\nhow-to\n\n\n\n\n\n\n\n\n\nAug 9, 2022\n\n\nYebelay\n\n\n\n\n\n\n\n\n\n\n\n\nBuild a simple website with R and Quarto in under 30 10 minutes.\n\n\nAnd then spend hours tweaking it.\n\n\n\nquarto\n\n\nhow-to\n\n\n\n\n\n\n\n\n\nAug 6, 2022\n\n\nPhilipp Kollenda\n\n\n\n\n\n\nNo matching items"
  },
  {
    "objectID": "posts/tt2022-08-09_ferriswheels/index.html#using-tidy-tuesday-to-combine-creativity-and-data-visualization-skills.",
    "href": "posts/tt2022-08-09_ferriswheels/index.html#using-tidy-tuesday-to-combine-creativity-and-data-visualization-skills.",
    "title": "How far does that ferris wheel roll?",
    "section": "",
    "text": "What I love about data visualization is how it combines creative thinking (what do I want to show?) with technical programming skills (how do I show this?). Nowhere do you combine these two things as elegantly as in the weekly tidy tuesday challenges. Here, data wizards around the word play and practice with fascinating datasets from chocolate bar ratings to the mobility of ERASMUS students to – this week – data on ferris wheels around the world.1 As someone who goes pale in any kind of rollercoaster, ferris wheels feel just about advantageous enough to start my own tidy tuesday journey.\n\n\n\nBefore opening R, I think about what I find fascinating about the topic and what I want to convey with my visualization. Here I am sticking to some descriptive analysis and won’t overthink it, so let’s just go with one of the first thing that came to my mind… ferris wheels are really big!\n\nIf a ferris wheel would be an actual wheel, how far would it travel during one rotation?2\n\nThe message gives me part of the structure for the visualization. Here, I want to select a few examples from different countries and show the diameter on the x-axis. I’ve created a lot of horizontal bar charts for a consultancy this summer, so naturally this is my starting point.\nA great thing about these just-for-fun challenges is that you can use them to add 1-2 new skills to your visualization toolbox. For this challenge I want to learn two things:\n\nHow do I add icons (ferris wheels 🎡, obviously) instead of dots in the chart?\nHow do I add country flags on the y-axis.\n\nI don’t want to spend the entire evening on this, so I think it is important to limit myself to only these two new features. I will also concentrate on them and not care too much (yet) about other things, like titles, background, themes, etc…\n\n\n\n\n\n\nImportant\n\n\n\nBecause this isn’t a mystery novel, I am giving away how the visualization will look like in the end. Don’t click if you want to keep the suspense…\n\n\n\n\n\nWith these initial thoughts out of the way, I can roughly sketch the visualization process and outline of this post.\n\nA first look at the data. Choose which points to show.\nCreate the simplest graph that shows the intended message.\nAdd the ferris wheel icons.\nAdd the country flags.\nClean up the graph.\n\n\n\n\n\n\n\n\n\nLet’s first install the necessary packages and load and save the data.\n#install.packages(c(\"tidytuesdayR\", \"tidyverse\", \"here\", \"ggimage\", \"countrycode\", \"ggtext\"))\nlibrary(tidyverse)\nlibrary(here)\n#data &lt;- tidytuesdayR::tt_load(\"2022-08-09\")$wheels\n#write_rds(data, here(\"posts\", \"tt2022-08-09_ferriswheels\", \"data\", \"wheels\"))\ndata &lt;- read_rds(here(\"posts\", \"tt2022-08-09_ferriswheels\", \"data\", \"wheels\"))\n\n\n\nThe entire dataset collects 22 variables on 73 ferris wheels in 26 different countries. This is way to much information to display, so let’s keep only a handful of ferris wheels and only information on their name, country, height and diameter.\n\ndata &lt;- data |&gt; \n  select(country, name, height, diameter) |&gt; \n  group_by(country) |&gt; \n  filter(height == max(height, na.rm = T),\n         country %in% c(\"Austria\", \"Canada\", \"China\", \"Mexico\", \"UK\", \"USA\")) |&gt;\n  ungroup() |&gt; \n  mutate(across(c(height, diameter), round, 0),\n         country = factor(country))\n\nThis is the data that we will use. As a comparison, I will add data from a more typical wheel: my dutch bicycle wheel.\n\ndata &lt;- bind_rows(data, tibble(country = \"Netherlands\", name = \"Philipp's bike wheel\", height = 0.67, diameter = 0.67))\nknitr::kable(data)\n\n\n\n\ncountry\nname\nheight\ndiameter\n\n\n\n\nChina\nBeijing Great Wheel\n693.00\n643.00\n\n\nUSA\nGolden Gate Flyer\n728.00\n700.00\n\n\nUK\nLondon Eye\n443.00\n394.00\n\n\nCanada\nNiagara SkyWheel\n175.00\n167.00\n\n\nMexico\nStar of Puebla\n262.00\n229.00\n\n\nAustria\nWiener Riesenrad\n212.00\n200.00\n\n\nNetherlands\nPhilipp’s bike wheel\n0.67\n0.67\n\n\n\n\n\n\n\n\n\np &lt;- ggplot(data, aes(y = fct_rev(country), x = diameter)) + \n  labs(x = \"\", y = \"\",\n       # x = \"Diameter of the highest ferris wheel in the country (in meter)\"\n       title = \"How far do you travel during one rotation in the largest ferris wheels?\",\n       caption = \"Data from ferriswheel package by Emil Hvitfeldt, #tidytuesday August 2022\") +\n  scale_x_continuous(limits = c(0, 800)) +\n  theme_minimal() +\n  theme(panel.grid = element_blank())\np +\n  geom_point() +\n  geom_segment(aes(y = country, yend = country, x = 0, xend = diameter), linetype = \"dashed\")\n\n\n\n\n\n\n\n\n\n\n\n\n\nThis isn’t pretty, but that’s not the point. Having a bare-minimum working example helps to think about whether the graph type fits and what can be done to emphasise the key message. It also helps to create a to-do list of things to improve: like a different order of ferris wheels, maybe adding an empty row to separate the bike data from the ferris wheel data, a label or subtitle that puts the ferris wheel in relation to the bike wheel, another background color, adding ‘meter’ to the x-axis and more). But let us first tackle the two big learnings that I wanted to get out of the challenge: replacing the dots with icons (now I also need a bike, 🚲) and adding the country flags.\n\n\n\nAs always, there are many ways to Rome. Here I am going with the ggimage package maintained by Guangchuang YU. I have not used this before, but a look at the online vignette makes me hopeful that I can use this for the ferris wheel icons and the country flags 😃\nThere are two ways we can go. The first is to use the ggimage::geom_emoji and to insert the ferris wheel and bicycle emojis that I have used throughout the post. That seems simple, we just need the unicode to pass it to the function. That’s easy to look up at, e.g. https://unicode.org/emoji/charts/full-emoji-list.html.\n\ndata$size = if_else(data$name == \"Philipp's bike wheel\", 0.075, data$diameter / max(data$diameter) * 0.25)\np +\n  geom_segment(aes(y = fct_rev(country), yend = fct_rev(country), x = 0, xend = diameter), linetype = \"dashed\", color = \"gray\", position = position_nudge(y = - 0.25)) +\n  ggimage::geom_emoji(aes(image = if_else(name == \"Philipp's bike wheel\", \"1f6b2\", \"1f3a1\")), position = position_nudge(y = (data$size / 0.3) - 0.25), size = data$size)\n\n\n\n\n\n\n\n\nThis looks OK. The most complicated part was actually that I wanted to scale the size of the image by the size of the ferris wheel, which required making an extra size column and experimenting a lot with position_nudge to let the dashed line go to the bottom of the icon, not to the middle. But I am not super happy with the emoji’s, so let’s try to download some images of ferris wheels and use those with ggimage::geom_image() instead.\nI’ll first download a simple transparent ferris wheel png file (from here) and use a bike icon (from here).\n\nferris_path &lt;- here(\"posts\", \"tt2022-08-09_ferriswheels\", \"images\", \"ferriswheel.png\")\nbike_path &lt;- here(\"posts\", \"tt2022-08-09_ferriswheels\", \"images\", \"bike.png\")\n\np1 &lt;- p +\n  geom_segment(aes(y = fct_rev(country), yend = fct_rev(country), x = 0, xend = diameter),\n               linetype = \"dashed\", color = \"gray\", \n               position = position_nudge(y = - 0.25)) +\n  ggimage::geom_image(\n    aes(image = if_else(data$name == \"Philipp's bike wheel\", bike_path, ferris_path)), \n    position = position_nudge(y = (data$size / 0.27) - 0.25, \n                              x = if_else(data$name == \"Philipp's bike wheel\", 15, 0)), \n    size = data$size * 1.5)\np1\n\n\n\n\n\n\n\n\nI’m happy with this. Onwards to do the country flags!\n\n\n\nIn the plots so far, I kept the country names on the y-axis. However, I would prefer to use the actual names of the ferris wheel and replace the country names with flags. We’ll continue with the ggimage package, which contains a geom_flag() function. The package expects country codes (e.g. NL, US), so we need to transform the names by hand using the countrycodes package.\n\n# Create the country labels from the country names\ndata$code &lt;- countrycode::countrycode(data$country, origin = \"country.name\", destination = \"iso2c\") \n\n# Sort the factor levels of the 'name' variable alphabetically *by country* (the combination of arrange and fct_inorder does that, there are surely smarter ways)\ndata &lt;- data |&gt; arrange(country)\ndata$name &lt;- fct_inorder(factor(data$name))\n\n# Create the graph again from scratch because instead of mapping the country to the y axis, I now\n# map the name to the y axis. Again, surely there are smarter ways to do that...\n# I also move the flags a bit to the left of the x axis and expand the limits of the plot accordingly.\np2 &lt;- \n  ggplot(data, aes(y = fct_rev(name), x = diameter)) + \n  geom_segment(aes(y = fct_rev(name), yend = fct_rev(name), x = 0, xend = diameter),\n               linetype = \"dashed\", color = \"gray\", \n               position = position_nudge(y = - 0.25)) +\n  ggimage::geom_image(aes(image = if_else(name == \"Philipp's bike wheel\", bike_path, ferris_path)),\n                      position = position_nudge(y = (data$size / 0.27) - 0.25,\n                                                x = if_else(data$name == \"Philipp's bike wheel\", 15, 0)),\n                      size = data$size * 1.5) +\n  ggimage::geom_flag(x = -70, aes(image = code)) +\n  labs(x = \"\", y = \"\",\n       title = \"How far do you travel during one rotation in the largest ferris wheels?\",\n       caption = \"Data from ferriswheel package by Emil Hvitfeldt, #tidytuesday August 2022\") +\n  scale_x_continuous(limits = c(-50, 800)) +\n  theme_minimal() +\n  theme(panel.grid = element_blank())\np2\n\n\n\n\n\n\n\n\nThis looks fine. The main headache in the code chunk above was replacing the mapping of the y axis to show the name (and not the country) and correcting the ordering of the observations.\n\n\n\nI am happy with how the flags and ferris wheels turned out and am now ready to go back to the to-do list from the beginning with some minor things to clean up the graph. This is a playful challenge and ferris wheels are fun, so let’s go for a very light pinkish background colour. I am also adding a text box (using the ggtext package) to use my bicycle wheel as an example to show just how big these ferris wheels are.\n\n\nCode\nturns &lt;- pull(round(data[which(data$diameter == max(data$diameter)), \"diameter\"] / data[data$name == \"Philipp's bike wheel\", \"diameter\"]))\ndata$name &lt;- fct_relevel(data$name, \"Philipp's bike wheel\")\n\np3 &lt;- \n  ggplot(data, aes(y = fct_rev(name), x = diameter)) + \n  geom_segment(aes(y = fct_rev(name), yend = fct_rev(name), x = 0, xend = diameter),\n               linetype = \"dashed\", color = \"gray\", alpha = 0.5,\n               position = position_nudge(y = -0.25)) +\n  ggimage::geom_image(aes(image = if_else(name == \"Philipp's bike wheel\", bike_path, ferris_path)),\n                      position = position_nudge(y = (data$size / 0.27) - 0.25,\n                                                x = if_else(data$name == \"Philipp's bike wheel\", 15, 0)),\n                      size = data$size * 1.5) +\n  ggimage::geom_flag(x = -70, aes(image = code)) +\n  labs(x = \"\", y = \"\",\n       title = \"How far do you travel with one rotation of the largest wheels in the world?\",\n       caption = \"Visualization by Philipp Kollenda / @pkollenda . Accompanying blog post on my website. \\n Data from ferriswheel package by Emil Hvitfeldt, #tidytuesday August 2022\") +\n  ggtext::geom_textbox(aes(x = 300, y = 6.75, hjust = 0,\n                           label = glue::glue(\"My bike wheel has to &lt;span style='color: red;'&gt;turn {turns} times&lt;/span&gt; to travel the same distance as one rotation with the largest ferris wheel.\")),\n                       fill = \"papayawhip\", width = unit(6, \"cm\"), size = 3) +\n  scale_x_continuous(limits = c(-50, 800), labels = scales::label_number(suffix = \" meter\")) +\n  theme_minimal() +\n  theme(panel.grid = element_blank(), legend.position = \"none\",\n        plot.title.position = \"plot\", plot.title = ggtext::element_textbox_simple(size = 20, padding = margin(c(10, 10, 20, 10))),\n        axis.text.y = element_text(size = 12)) +\n  theme(plot.background = element_rect(fill = \"#FFFAFA\"))\np3\n\n\n\n\n\n\n\n\n\n\n\n\nI am happy with how this visualization turned out and glad I learned something about how to insert flags, icons and other images with the ggimage package. I will now hop on my bicycle and think of the Golden Gate Flyer… approximately every 1045 (bike) wheel turn."
  },
  {
    "objectID": "posts/tt2022-08-09_ferriswheels/index.html#footnotes",
    "href": "posts/tt2022-08-09_ferriswheels/index.html#footnotes",
    "title": "How far does that ferris wheel roll?",
    "section": "Footnotes",
    "text": "Footnotes\n\n\nSidenote: Neal Grantham has a cool Shiny app to browse previous tidy tuesday submissions.↩︎\nPerceptive readers may have noticed that this is just the diameter of the wheel. But, doesn’t that sound much less exciting?↩︎"
  }
]
{"title":"Excess attraction in the Bundesliga","markdown":{"yaml":{"title":"Excess attraction in the Bundesliga","subtitle":"Which teams would have the most members if location was the only thing that mattered?","date":"2022-08-18","categories":["interactive","football"],"resources":"*.png","image":"images/table.png"},"headingText":"How many members would Bundesliga clubs have if everyone supported their closest club?","containsRefs":false,"markdown":"\n\n\nIn August 2022, [Ansgar Wolsing](https://twitter.com/_ansgar) shared a visualization that shows how many Germans live closest to each football club in the first and second division ([here is the tweet](#the-tweet)). Interestingly, RB Leipzig came out on top which shows two things: first, there are few football clubs in eastern Germany in the first two divisions relative to the population (Magdeburg, Rostock, Union Berlin, Hertha BSC Berlin and RB Leibzig) and second, the number of people who live close to a club does not necessarily translate into many fans or members. After all, in 2021/2022 RB Leibzig only had the 8th most fans in their Red Bull Arena out of the 18 clubs in the first division. The club also only has 21 members, [because of reasons...](https://www.dw.com/en/rb-leipzig-red-bull-ceo-dietrich-mateschitz-and-politics-its-complicated/a-50208315).\n\nObviously, RB Leibzig is an extreme example. But still, I was curious how membership numbers relate to the share of the German population that live closest to each club.^[Technically, I calculate **excess attraction** as the difference between the actual number of members a club has and the number of members that we would expect if the total number of all club members are redistributed according to the share of population which live closest to each club.]\n\nThe table below shows the answer. Have fun investigating, you can search for your favorite club, filter by league and sort by excess attraction, membership and population.^[The value calculated by Ansgar Wolsing.]\n\n```{r}\n#| include: false\nlibrary(tidyverse)\nlibrary(reactable)\nlibrary(reactablefmtr)\nlibrary(htmltools)\nlibrary(tippy)\nlibrary(here)\n```\n\n```{r}\n#| message: false\n#| echo: true\ndata <- read_csv(here(\"posts\", \"rp_bundesliga-table\", \"data\", \"club-data.csv\"), show_col_types = FALSE)\ndata <- data |> \n  mutate(share_population = population / sum(population),\n         expected_members = share_population * sum(members), \n         excess_members = members - expected_members)\n```\n\n```{r}\n#| message: false\n#| code-fold: true\nwith_tooltip <- function(value, tooltip, ...) {\n  div(style = \"text-decoration: underline; text-decoration-style: dotted; cursor: help\",\n      tippy(value, tooltip, ...))\n}\n\nreactable(\n  data[, c(\"league\", \"name\", \"excess_members\", \"members\", \"population\")],\n  searchable = TRUE,\n  defaultColDef = colDef(format = colFormat(separators = TRUE), sortable = TRUE, align = \"center\"),\n  columns = list(\n    league = colDef(\"League\", width = 50, sortable = FALSE, filterable = TRUE,\n                    filterInput = function(values, name) {\n                      tags$select(\n                        onchange = sprintf(\"Reactable.setFilter('league-select', '%s', event.target.value || undefined)\", name),\n                        tags$option(value = \"\", \"All\"),\n                        lapply(unique(values), tags$option),\n                        \"aria-label\" = sprintf(\"Filter %s\", name),\n                        style = \"width: 100%; height: 28px;\"\n                        )\n                      }\n                    ),\n    name = colDef(cell = function(value) {\n      image <- img(src = sprintf(\"team_icons/%s.png\", value), style = \"height: 24px;\", alt = value)\n      tagList(\n        div(style = \"display: inline-block; width: 60px; text-align: center;\", image),\n        value\n      )\n    }, name = \"Club\", width = 210, sortable = FALSE, align = \"left\"),\n    excess_members = colDef(header = with_tooltip(\"Excess attraction\", \"The difference between the number of members and the expected number of members if everyone would support the club closest to where they live.\"), \n                            cell = data_bars(data, number_fmt = scales::label_comma(), text_position = \"outside-end\", fill_color = c(\"#E74C3C\", \"#2C3E50\")), minWidth = 200, sortable = TRUE),\n    members = colDef(\"Members\", cell = data_bars(data, text_position = \"outside-end\", number_fmt = scales::label_comma(), background = NULL, fill_color = \"#C9C5BA\"), sortable = TRUE),\n    population = colDef(\"Potential reach\", cell = data_bars(data, text_position = \"outside-end\", number_fmt = scales::label_comma(), background = NULL, fill_color = \"#C9C5BA\"), sortable = TRUE)),\n  bordered = TRUE, highlight = TRUE, showSortable = TRUE, wrap = FALSE,\n  elementId = \"league-select\",\n  defaultPageSize = 9,\n  theme = espn()\n) |> \n  add_title(\"Club Membership\", font_size = 24, letter_spacing = 3, word_spacing = 3, margin = margin(0, 0, 10, 0)) |> \n  add_subtitle(\"Bayern Munich has 215,000 more members than we would expect given the number of Germans for whom Bayern is the closest club.\", font_size = 16, font_weight = \"normal\") |> \n  add_source(\"Based on and inspired by Ansgar Wolsing (@_ansgar). Additional membership data from transfermarkt.de\", align = \"right\", font_size = 12, font_color = \"gray\")\n```\n\n\\\n\n### The tweet that inspired this table {#the-tweet}  \n\n<blockquote class=\"twitter-tweet\"><p lang=\"de\" dir=\"ltr\">Was w√§re wenn jeder den n√§chstgelegenen Verein in der 1. oder 2. Bundesliga unterst√ºtzte?<br><br>‚öΩÔ∏è Jeder Kreis gibt an, f√ºr wie viele Menschen das Stadion des jeweiligen Vereins das n√§chste ist.<br><br>ü•á RB Leipzig<br>ü•à Bayern M√ºnchen<br>ü•â Eintracht Frankfurt<a href=\"https://twitter.com/hashtag/rstats?src=hash&amp;ref_src=twsrc%5Etfw\">#rstats</a> <a href=\"https://twitter.com/hashtag/datavisualization?src=hash&amp;ref_src=twsrc%5Etfw\">#datavisualization</a> <a href=\"https://twitter.com/hashtag/maps?src=hash&amp;ref_src=twsrc%5Etfw\">#maps</a> <a href=\"https://t.co/L8VPZ1tBoz\">pic.twitter.com/L8VPZ1tBoz</a></p>&mdash; Ansgar Wolsing (@_ansgar) <a href=\"https://twitter.com/_ansgar/status/1558463386597445634?ref_src=twsrc%5Etfw\">August 13, 2022</a></blockquote> <script async src=\"https://platform.twitter.com/widgets.js\" charset=\"utf-8\"></script>","srcMarkdownNoYaml":"\n\n# How many members would Bundesliga clubs have if everyone supported their closest club?\n\nIn August 2022, [Ansgar Wolsing](https://twitter.com/_ansgar) shared a visualization that shows how many Germans live closest to each football club in the first and second division ([here is the tweet](#the-tweet)). Interestingly, RB Leipzig came out on top which shows two things: first, there are few football clubs in eastern Germany in the first two divisions relative to the population (Magdeburg, Rostock, Union Berlin, Hertha BSC Berlin and RB Leibzig) and second, the number of people who live close to a club does not necessarily translate into many fans or members. After all, in 2021/2022 RB Leibzig only had the 8th most fans in their Red Bull Arena out of the 18 clubs in the first division. The club also only has 21 members, [because of reasons...](https://www.dw.com/en/rb-leipzig-red-bull-ceo-dietrich-mateschitz-and-politics-its-complicated/a-50208315).\n\nObviously, RB Leibzig is an extreme example. But still, I was curious how membership numbers relate to the share of the German population that live closest to each club.^[Technically, I calculate **excess attraction** as the difference between the actual number of members a club has and the number of members that we would expect if the total number of all club members are redistributed according to the share of population which live closest to each club.]\n\nThe table below shows the answer. Have fun investigating, you can search for your favorite club, filter by league and sort by excess attraction, membership and population.^[The value calculated by Ansgar Wolsing.]\n\n```{r}\n#| include: false\nlibrary(tidyverse)\nlibrary(reactable)\nlibrary(reactablefmtr)\nlibrary(htmltools)\nlibrary(tippy)\nlibrary(here)\n```\n\n```{r}\n#| message: false\n#| echo: true\ndata <- read_csv(here(\"posts\", \"rp_bundesliga-table\", \"data\", \"club-data.csv\"), show_col_types = FALSE)\ndata <- data |> \n  mutate(share_population = population / sum(population),\n         expected_members = share_population * sum(members), \n         excess_members = members - expected_members)\n```\n\n```{r}\n#| message: false\n#| code-fold: true\nwith_tooltip <- function(value, tooltip, ...) {\n  div(style = \"text-decoration: underline; text-decoration-style: dotted; cursor: help\",\n      tippy(value, tooltip, ...))\n}\n\nreactable(\n  data[, c(\"league\", \"name\", \"excess_members\", \"members\", \"population\")],\n  searchable = TRUE,\n  defaultColDef = colDef(format = colFormat(separators = TRUE), sortable = TRUE, align = \"center\"),\n  columns = list(\n    league = colDef(\"League\", width = 50, sortable = FALSE, filterable = TRUE,\n                    filterInput = function(values, name) {\n                      tags$select(\n                        onchange = sprintf(\"Reactable.setFilter('league-select', '%s', event.target.value || undefined)\", name),\n                        tags$option(value = \"\", \"All\"),\n                        lapply(unique(values), tags$option),\n                        \"aria-label\" = sprintf(\"Filter %s\", name),\n                        style = \"width: 100%; height: 28px;\"\n                        )\n                      }\n                    ),\n    name = colDef(cell = function(value) {\n      image <- img(src = sprintf(\"team_icons/%s.png\", value), style = \"height: 24px;\", alt = value)\n      tagList(\n        div(style = \"display: inline-block; width: 60px; text-align: center;\", image),\n        value\n      )\n    }, name = \"Club\", width = 210, sortable = FALSE, align = \"left\"),\n    excess_members = colDef(header = with_tooltip(\"Excess attraction\", \"The difference between the number of members and the expected number of members if everyone would support the club closest to where they live.\"), \n                            cell = data_bars(data, number_fmt = scales::label_comma(), text_position = \"outside-end\", fill_color = c(\"#E74C3C\", \"#2C3E50\")), minWidth = 200, sortable = TRUE),\n    members = colDef(\"Members\", cell = data_bars(data, text_position = \"outside-end\", number_fmt = scales::label_comma(), background = NULL, fill_color = \"#C9C5BA\"), sortable = TRUE),\n    population = colDef(\"Potential reach\", cell = data_bars(data, text_position = \"outside-end\", number_fmt = scales::label_comma(), background = NULL, fill_color = \"#C9C5BA\"), sortable = TRUE)),\n  bordered = TRUE, highlight = TRUE, showSortable = TRUE, wrap = FALSE,\n  elementId = \"league-select\",\n  defaultPageSize = 9,\n  theme = espn()\n) |> \n  add_title(\"Club Membership\", font_size = 24, letter_spacing = 3, word_spacing = 3, margin = margin(0, 0, 10, 0)) |> \n  add_subtitle(\"Bayern Munich has 215,000 more members than we would expect given the number of Germans for whom Bayern is the closest club.\", font_size = 16, font_weight = \"normal\") |> \n  add_source(\"Based on and inspired by Ansgar Wolsing (@_ansgar). Additional membership data from transfermarkt.de\", align = \"right\", font_size = 12, font_color = \"gray\")\n```\n\n\\\n\n### The tweet that inspired this table {#the-tweet}  \n\n<blockquote class=\"twitter-tweet\"><p lang=\"de\" dir=\"ltr\">Was w√§re wenn jeder den n√§chstgelegenen Verein in der 1. oder 2. Bundesliga unterst√ºtzte?<br><br>‚öΩÔ∏è Jeder Kreis gibt an, f√ºr wie viele Menschen das Stadion des jeweiligen Vereins das n√§chste ist.<br><br>ü•á RB Leipzig<br>ü•à Bayern M√ºnchen<br>ü•â Eintracht Frankfurt<a href=\"https://twitter.com/hashtag/rstats?src=hash&amp;ref_src=twsrc%5Etfw\">#rstats</a> <a href=\"https://twitter.com/hashtag/datavisualization?src=hash&amp;ref_src=twsrc%5Etfw\">#datavisualization</a> <a href=\"https://twitter.com/hashtag/maps?src=hash&amp;ref_src=twsrc%5Etfw\">#maps</a> <a href=\"https://t.co/L8VPZ1tBoz\">pic.twitter.com/L8VPZ1tBoz</a></p>&mdash; Ansgar Wolsing (@_ansgar) <a href=\"https://twitter.com/_ansgar/status/1558463386597445634?ref_src=twsrc%5Etfw\">August 13, 2022</a></blockquote> <script async src=\"https://platform.twitter.com/widgets.js\" charset=\"utf-8\"></script>"},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":"auto","echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"engine":"knitr"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":true,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","output-file":"index.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","other-links-title":"Other Links","code-links-title":"Code Links","launch-dev-container-title":"Launch Dev Container","launch-binder-title":"Launch Binder","article-notebook-label":"Article Notebook","notebook-preview-download":"Download Notebook","notebook-preview-download-src":"Download Source","notebook-preview-back":"Back to Article","manuscript-meca-bundle":"MECA Bundle","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","title-block-keywords":"Keywords","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","tools-share":"Share","tools-download":"Download","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-text-placeholder":"","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-wordcount":"Word Count","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items","listing-page-words":"{0} words"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.4.553","theme":"../../theme.scss","author":"Haymanot","title-block-banner":true,"title":"Excess attraction in the Bundesliga","subtitle":"Which teams would have the most members if location was the only thing that mattered?","date":"2022-08-18","categories":["interactive","football"],"resources":"*.png","image":"images/table.png"},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}